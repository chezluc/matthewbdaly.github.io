
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Matthew Daly's Blog</title>
  <meta name="author" content="Matthew Daly">

  
  <meta name="description" content="On Friday of last week I unexpectedly got a text from Vodafone saying I was able to upgrade my phone early. I was pretty pleased about this as having &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://matthewdaly.co.uk/posts/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Matthew Daly's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17043630-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Matthew Daly's Blog</a></h1>
  
    <h2>I'm a web developer in Norfolk. This is my blog...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:matthewdaly.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/30/new-phone/">New Phone</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-03-30T20:34:26+01:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>8:34 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On Friday of last week I unexpectedly got a text from Vodafone saying I was able to upgrade my phone early. I was pretty pleased about this as having been something of an Android early adopter, I was still using an early Android phone, namely my HTC Magic. While a fine phone when it was released, it was only the second Android phone to become available in the UK and was therefore a bit dated compared to newer devices. It has been upgraded to Froyo (albeit a cut-down custom build) but that did slow the phone down somewhat.</p>

<p>So as soon as I had the opportunity I had a good look around for a new one to replace it. Right from the start I had my eye on the HTC Desire Z. Much as I love touchscreen phones, it&rsquo;s very often extremely handy to have a physical keyboard, and as I&rsquo;ve found myself using ConnectBot to connect to my home server via SSH a lot, the keyboard-toting Desire Z immediately had an advantage over the touchscreen-only models. Ideally I didn&rsquo;t want to change my plan, so I checked out the deals for HTC phones on the same plan, and the Desire Z happened to be the only one on the same plan, so it was a no-brainer.</p>

<p>I got the phone on Monday, and it is amazing. The keyboard is easy to use and works well, the phone is lightning fast, and the UI is spot-on - it has everything I love about Android on the Magic (like the great notification system) and more. In particular I love the RSS reader- it syncs with Google Reader, so if I have to wait for a train, I can at least read some feeds while I&rsquo;m waiting.</p>

<p>One thing I&rsquo;m hoping to get more use out of is <a href="https://code.google.com/p/android-scripting/">SL4A</a>. I had this on my Magic, but coding on a touchscreen phone is not easy! I&rsquo;m hoping that with the Desire Z&rsquo;s keyboard, this will be a lot more useful.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/02/21/more-on-my-mini-server/">More on My Mini Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-02-21T22:26:13+00:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2011</span></span> <span class='time'>10:26 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While I was very pleased to get a proper Linux distro working on my Pogoplug, the Arch-based Plugbox Linux was never really my cup of tea. While it&rsquo;s a fine distro, I always felt that Debian would have been a much better fit. Partly this is because Debian has established a strong history of being a solid, stable distro that would carry on working no matter what, whereas Arch is more bleeding-edge. Also, Debian has a colossal repository that included a lot of software I wanted that wasn&rsquo;t in the Arch repositories and I couldn&rsquo;t get to install or compile from source, such as procmail and Squirrelmail. Debian also has strong support for many different processor architectures, including armel. Finally, being an Ubuntu user on the desktop, Debian is a distro that feels much more familiar to me.</p>

<p>So I eventually gave up on running Plugbox Linux and took the opportunity of the release of Debian Squeeze to install it on my Pogoplug, thanks to <a href="http://jeff.doozan.com/debian/">this tutorial</a>. With that done, I set about adding my favourite applications. Byobu is a really handy tool that makes GNU screen significantly more intuitive and useful, so that&rsquo;s always one of the first things to go on, and one that I&rsquo;d really missed in Plugbox. I&rsquo;ve now gotten my mail server working again, with the addition of procmail as my mail filter and Squirrelmail to give me a web interface. I&rsquo;ve also set up Leafnode on there as I&rsquo;d really like to learn more about Usenet, and I&rsquo;m beginning to get the hang of using slrn to read it.</p>

<p>It&rsquo;s amazing how much running my own server has taught me about security. I was staggered to see the sheer number of attempts by script kiddies to connect via SSH to my Pogoplug, and it really made me start thinking about security in a way I&rsquo;d never bothered beforehand. I&rsquo;ve installed denyhosts to block atttempts to brute-force the password, and made sure I chose a good password. I&rsquo;ve also set OpenSSH to listen on a different port, which should hopefully decrease the number of login attempts substantially (I presume most of these were just script kiddies scanning large blocks of IP addresses looking for hosts with port 22 open), and have disabled root login (as at right now my login is the only one that is allowed via SSH, so if anyone does bother to do a more thorough scan and try to connect to the port I&rsquo;m running SSH on, they&rsquo;ll need to guess my username AND password, and do so before denyhosts kicks them off - a pretty tall order).</p>

<p>The whole concept of &ldquo;plug servers&rdquo; is one I really like, and my experience with the Pogoplug has been extremely good - it&rsquo;s an inexpensive and extremely hackable device that has been an absolute pleasure to use.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/24/my-new-mini-server/">My New Mini Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-01-24T00:30:20+00:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>12:30 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For a while now I&rsquo;ve wanted a home server of some description, the idea being that it was something I could use to run a web server for development purposes, and a mail server so I could have an offline backup for my Gmail account (considering how much I rely on it, it&rsquo;s only prudent to plan for what might happen if Gmail went down), and whatever else I need. Also, I only have laptops at present so I liked the idea of having something I could leave on all the time and connect to remotely via SSH.</p>

<p>Around Christmas, I read a forum post by someone who&rsquo;d bought a PogoPlug cheap from PC World and had hacked it into a web server using Plugbox Linux, an Arch-based Linux distro. Shortly afterwards, I went into a branch of Currys in Norwich, and they had one on sale (£20 off the RRP of £70), so I shelled out for it. I already had a load of USB flash drives lying around, and an 8GB one is big enough for what I had in mind. After all, I wasn&rsquo;t going to be serving anything that demanding over it, so something small and low-powered should be fine.</p>

<p>This weekend I finally got round to getting it set up. The PogoPlug service is actually pretty good - if you&rsquo;re unfamiliar with it, it&rsquo;s basically a self-hosted version of Dropbox, where you buy the device, connect it to your router, attach up to 4 flash drives or hard drives via USB, then share the files stored on them easily across your home network or over the Internet. However, this wasn&rsquo;t really what I wanted.</p>

<p>Installing Plugbox Linux wasn&rsquo;t hard - I merely had to activate SSH from the PogoPlug&rsquo;s control panel, connect and kill the hbwd process, then install a new bootloader to enable it to boot the new OS. Once that was done, it was a case of attaching a flash drive, ensuring it was correctly mounted and the filesystem was set up properly, then downloading the Plugbox Linux tarball and unpacking it on the flash drive, before rebooting into the new OS.</p>

<p>Once it was installed, it wasn&rsquo;t too hard to get the hang of pacman. I&rsquo;d prefer it to have been Debian-based as that&rsquo;s what I&rsquo;m most familiar with, but that&rsquo;s just personal preference. After a little tinkering I now have Postfix and Dovecot working on there, as well as Apache (although it might make sense to switch to something lighter, such as lighttpd or Cherokee). I&rsquo;ve given it a fully qualified domain name via a free subdomain at dyndns.org, and I can now access emails on there via IMAP. Outgoing email works fine too, so I can always set up a Perl script or two to notify me if anything goes wrong by sending an email to my Gmail account. I&rsquo;ve set up fetchmail to pull emails from my Gmail account via POP3, so all my email is in the process of being backed up on there, and I can use my phone to access it via IMAP, or SSH in and read it with Mutt. Going forwards, I may install Squirrelmail as well to give me more options.</p>

<p>One thing I&rsquo;m not too sure about - I couldn&rsquo;t get incoming mails to work, and I&rsquo;m unsure whether this is because it&rsquo;s using a subdomain (the email address is basically <a href="&#109;&#x61;&#105;&#x6c;&#116;&#x6f;&#58;&#x6d;&#x61;&#x74;&#x74;&#104;&#101;&#x77;&#64;&#x6d;&#x79;&#x64;&#111;&#x6d;&#x61;&#x69;&#110;&#x6e;&#x61;&#x6d;&#101;&#46;&#100;&#121;&#x6e;&#100;&#110;&#x73;&#46;&#111;&#114;&#103;">&#x6d;&#x61;&#x74;&#x74;&#x68;&#101;&#119;&#x40;&#x6d;&#x79;&#x64;&#x6f;&#109;&#97;&#105;&#110;&#x6e;&#x61;&#109;&#x65;&#x2e;&#100;&#x79;&#110;&#x64;&#x6e;&#x73;&#x2e;&#x6f;&#x72;&#x67;</a>) or Postfix is merely misconfigured. Is it possible to receive emails to a subdomain in this fashion?</p>

<p>Anyway, this is a really great little machine and it&rsquo;s been lots of fun getting it set up. I have to say, though, I&rsquo;m really disappointed with the range of home server and NAS products currently on the market. Most of the NAS systems offer very little in the way of functionality or customisability, and most of the home servers are a bit too big, powerful and expensive, and usually run Windows Home Server, which isn&rsquo;t really my cup of tea.</p>

<p>What I&rsquo;d like to see is a small home server with a couple of hard drive bays at most, and a Debian or Ubuntu-based OS with access to apt-get and tasksel, so it&rsquo;s easy to install whatever you want from the repositories. Also, give it a web interface that&rsquo;s simpler than Webmin and makes it quick and easy to set up common software, but offer an advanced option for those that want it. That would be a fantastic device for end users - if it made it easy to set up a UPnP server, a Firefly server, or a BitTorrent client, that would be really useful.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/13/a-slight-change/">A Slight Change...</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-13T20:20:59+00:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>8:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just to say I&rsquo;ve changed the contact form I use on here. I always wanted to use one with a built-in CAPTCHA facility, as Disqus seems to have pretty much killed off the comment spam, but I was still getting it via the contact form. I&rsquo;ve put off doing something about it till now, but it was getting out of hand so I&rsquo;ve gone and found a new contact form. Let&rsquo;s hope this kills the spam&hellip;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/29/deleting-unwanted-vim-swap-files-using-perl/">Deleting Unwanted Vim Swap Files Using Perl</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-29T20:49:49+01:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>8:49 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yesterday I realised that I had somehow managed to scatter Vim swap files all across the Dropbox folder I use to share Perl and Python scripts I&rsquo;d written between several computers, and it would be a good idea to clear them up. I didn&rsquo;t like the idea of using grep to search for them and manually deleting them, so I decided this was the ideal opportunity to write a Perl script to do it for me!</p>

<p>I came up with the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="c1">#!/usr/bin/perl -w</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">Cwd</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">searchDir</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1"># Subroutine to scan a directory looking for Vim swap files</span>
</span><span class='line'>    <span class="c1"># Get directory to read and current directory</span>
</span><span class='line'>    <span class="k">my</span> <span class="nv">$readdir</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>    <span class="k">my</span> <span class="nv">$startdir</span> <span class="o">=</span> <span class="n">cwd</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Change directory to the target one</span>
</span><span class='line'>    <span class="nb">chdir</span><span class="p">(</span><span class="nv">$readdir</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Unable to open $readdir! $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Scanning contents of directory $startdir\n&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Open the directory and grab the names of all the files and folders in it</span>
</span><span class='line'>    <span class="nb">opendir</span><span class="p">(</span><span class="n">DIR</span><span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Unable to open current directory! $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">my</span> <span class="nv">@entries</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="n">DIR</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Unable to read directory! $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">closedir</span><span class="p">(</span><span class="n">DIR</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Loop through the files and folders in the directory</span>
</span><span class='line'>    <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$entry</span> <span class="p">(</span><span class="nv">@entries</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="c1"># Skip this one and the one above it in the filesystem hierarchy</span>
</span><span class='line'>        <span class="k">next</span> <span class="k">if</span><span class="p">(</span><span class="nv">$entry</span> <span class="ow">eq</span> <span class="s">&quot;.&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="k">next</span> <span class="k">if</span><span class="p">(</span><span class="nv">$entry</span> <span class="ow">eq</span> <span class="s">&quot;..&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1"># If a file is a directory, call the searchDir subroutine recursively in order to scan it</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span><span class="o">-</span><span class="n">d</span> <span class="nv">$entry</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">searchDir</span><span class="p">(</span><span class="nv">$entry</span><span class="p">);</span>
</span><span class='line'>            <span class="k">next</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1"># Use a regular expression to check to see if the current file starts with a period, and ends with .swp - if it does, it&#39;s a Vim swap file</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span><span class="nv">$entry</span> <span class="o">=~</span> <span class="sr">m/^\..*\.swp$/</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="c1"># Inform the user that a Vim swap file has been found and print out the path to it</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;Found a Vim swap file!\n&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="k">my</span> <span class="nv">$swppath</span> <span class="o">=</span> <span class="n">cwd</span><span class="p">();</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;It&#39;s the file $entry in $swppath.\n&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="k">my</span> <span class="nv">$fullpath</span> <span class="o">=</span> <span class="nv">$swppath</span> <span class="o">.</span> <span class="s">&quot;/&quot;</span> <span class="o">.</span> <span class="nv">$entry</span><span class="p">;</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;The full path is $fullpath.\n&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1"># Prompt the user to delete the file</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;Do you wish to delete this file? (Y/N)\t&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="nb">chomp</span><span class="p">(</span><span class="k">my</span> <span class="nv">$reply</span> <span class="o">=</span> <span class="p">);</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span><span class="nv">$reply</span> <span class="o">=~</span> <span class="sr">m/y/i</span><span class="p">)</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="k">print</span> <span class="s">&quot;Deleting $fullpath...\n&quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="nb">unlink</span><span class="p">(</span><span class="nv">$fullpath</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">chdir</span><span class="p">(</span><span class="nv">$startdir</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Get directory to begin the search</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Enter directory to start search: &quot;</span><span class="p">;</span>
</span><span class='line'><span class="nb">chomp</span><span class="p">(</span><span class="k">my</span> <span class="nv">$beginSearch</span> <span class="o">=</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># call searchDir to start the search</span>
</span><span class='line'><span class="n">searchDir</span><span class="p">(</span><span class="nv">$beginSearch</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thankfully, I&rsquo;ve now discovered the <a href="https://wordpress.org/extend/plugins/preserve-code-formatting/">Preserve Code Formatting plugin</a> for WordPress, which seems to do a good job at making the code look presentable!</p>

<p>This isn&rsquo;t perfect - it uses recursion to examine subdirectories, and when I ran it on my /home folder it somehow wound up in /sys on my Ubuntu machine and I ended up getting a deep recursion warning (a little research suggests this happens when it goes over 100 directories in). However, it seems to work fine for scanning individual folders in my /home directory, and that&rsquo;s all I really wanted anyway.</p>

<p>I love how Perl makes writing this kind of simple script so easy. It&rsquo;s a great language for that kind of systems administration task.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/27/a-couple-of-things-i-love-about-perl/">A Couple of Things I Love About Perl</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-27T00:15:33+01:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>12:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the time that I&rsquo;ve been learning Perl, I&rsquo;ve slowly grown to appreciate the strengths of the language more and more. There&rsquo;s two things in particular that I like about Perl. Once that I really don&rsquo;t think anyone is going to be surprised by is CPAN. It&rsquo;s a fantastic resource - there are a huge quantity of Perl modules available for virtually any task under the sun, and they&rsquo;re incredibly useful.</p>

<p>The other is just how good the documentation is - I&rsquo;ve never considered myself to be someone who learns terribly well from Unix man pages, but perldoc seems to have very good documentation indeed, including that for CPAN modules. Also, it helps that if you don&rsquo;t do well with the man page format, you have the option of running podwebserver and getting the documentation formatted as web pages.</p>

<p>To give an example, I&rsquo;m particularly interested in all kinds of network programming, be it web development, IRC, Jabber or whatever, and I&rsquo;d heard of the Net::IRC module so I decided to start using it to create a simple IRC bot (yes, I know I should really be using POE::Component::IRC instead!). Using the information gleaned from perldoc Net::IRC it was easy to get started writing a bot, and I&rsquo;ve now come up with the following simple bot:</p>

<figure class='code'><figcaption><span>ircbot.pl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="c1">#!/usr/bin/perl -w</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nn">Net::</span><span class="n">IRC</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$irc</span> <span class="o">=</span> <span class="k">new</span> <span class="nn">Net::</span><span class="n">IRC</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$nick</span> <span class="o">=</span> <span class="s">&quot;mattsbot&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$server</span> <span class="o">=</span> <span class="s">&quot;irc.freenode.net&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$channel</span> <span class="o">=</span> <span class="s">&quot;#botpark&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$port</span> <span class="o">=</span> <span class="mi">6667</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$ircname</span> <span class="o">=</span> <span class="s">&quot;My wonderful bot&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$owner</span> <span class="o">=</span> <span class="s">&quot;mattbd&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">on_connect</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">print</span> <span class="s">&quot;Joining $channel\n&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="nv">$self</span><span class="o">-&gt;</span><span class="nb">join</span><span class="p">(</span><span class="nv">$channel</span><span class="p">);</span>
</span><span class='line'>   <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">privmsg</span><span class="p">(</span><span class="nv">$channel</span><span class="p">,</span><span class="s">&quot;Ready to go!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">on_disconnect</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="nb">join</span><span class="p">(</span><span class="nv">$channel</span><span class="p">);</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">privmsg</span><span class="p">(</span><span class="nv">$channel</span><span class="p">,</span> <span class="s">&quot;Sorry about that - dropped out for a sec.&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">on_join</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1"># Get the connection and event objects</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$event</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Get the nick that just joined</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$newnick</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">nick</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Greet the new nick</span>
</span><span class='line'>  <span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">privmsg</span><span class="p">(</span><span class="nv">$channel</span><span class="p">,</span> <span class="s">&quot;Hello, $newnick! I&#39;m a greeting bot!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">on_msg</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1"># Get the connection and event objects</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$event</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Get nick of messaging user</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$messager</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">nick</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Respond negatively</span>
</span><span class='line'>  <span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">privmsg</span><span class="p">(</span><span class="nv">$messager</span><span class="p">,</span> <span class="s">&quot;Sorry, I&#39;m just a bot. Please don&#39;t message me!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">on_public</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1"># Get the connection and event objects</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$event</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Get nick of messaging user</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$messager</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">nick</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Get text of message</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">args</span><span class="p">}[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Check to see if text contains name of bot - if so message the user negatively</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nv">$text</span> <span class="o">=~</span> <span class="sr">m/$nick/</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">privmsg</span><span class="p">(</span><span class="nv">$channel</span><span class="p">,</span> <span class="s">&quot;Sorry, $messager,I&#39;m just a simple bot!&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$conn</span> <span class="o">=</span> <span class="nv">$irc</span><span class="o">-&gt;</span><span class="n">newconn</span><span class="p">(</span><span class="n">Nick</span> <span class="o">=&gt;</span><span class="nv">$nick</span><span class="p">,</span><span class="n">Server</span><span class="o">=&gt;</span><span class="nv">$server</span><span class="p">,</span><span class="n">Port</span><span class="o">=&gt;</span><span class="nv">$port</span><span class="p">,</span><span class="n">Ircname</span><span class="o">=&gt;</span><span class="nv">$ircname</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;376&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_connect</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;disconnect&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_disconnect</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_msg</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;join&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_join</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_msg</span><span class="p">);</span>
</span><span class='line'><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">add_global_handler</span><span class="p">(</span><span class="s">&#39;public&#39;</span><span class="p">,</span> <span class="o">\&amp;</span><span class="n">on</span><span class="p">;</span><span class="n">_public</span><span class="p">);</span>
</span><span class='line'><span class="nv">$irc</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, this bot isn&rsquo;t exactly hugely capable - all it does is greet new joiners, and tell you to leave it alone if you try to talk to it, but it was pretty easy to code it, thanks to the documentation, and it&rsquo;s a good base to build on. From here, it&rsquo;s easy to extend the on_public and on_msg subroutines to deal with other messages - for instance, I could use a regular expression to look for &ldquo;!respond&rdquo; in the text of the message and if it&rsquo;s found, respond with any appropriate text.</p>

<p>I&rsquo;ve hard-coded the appropriate details into the script in this case to make it quicker and easier to test it, but it would be trivial to change it to either accept settings passed as arguments from the command line, or have it grab these from a separate text file.</p>

<p>My initial doubts about Perl are really wearing off. It&rsquo;s a powerful language and one that, now I&rsquo;ve picked up the basic syntax, I&rsquo;m having little trouble getting work done with.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/19/i-passed/">I Passed!</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-19T14:52:55+01:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:52 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just a short post to say that today I did my CIW Perl Fundamentals exam, and passed it. Glad that&rsquo;s out of the way!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/16/another-perl-snippet/">Another Perl Snippet...</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-16T21:11:10+01:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>9:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&rsquo;s another simple Perl program I thought I&rsquo;d share. It&rsquo;s a very simple app for recording notes from the shell. As pasting the last one into WordPress didn&rsquo;t work too well, <a href="http://dl.dropbox.com/u/5031/notable.pl">it&rsquo;s on my Dropbox account</a> instead. I&rsquo;ve used SQLite as the backend for the database (a no-brainer - I really like SQLite for little quick-and-dirty scripts like this) and it works pretty well.</p>

<p>At some point I may go back to this basic concept and expand on it a little - it would make sense to add a GUI to it, either by using a graphical toolkit such as Tk or turning it into a web app. I also like the idea of adapting it to use a non-relational database - something like CouchDB perhaps.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/getting-work-done-with-perl/">Getting Work Done With Perl</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-15T20:39:10+01:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>8:39 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After my initial struggles with Perl, I now think I&rsquo;m really starting to get to grips with the language. I generally find it a pain when you have to learn by building small but basically useless scripts - I always do best when building something useful.</p>

<p>As one of the exercises for my studies I had to open a database connection to a Microsoft Access database, but I wanted to do the exercise in Ubuntu (I&rsquo;ve always preferred using Unix-like operating systems for programming, and thanks to apt-get it&rsquo;s a lot less grief installing additional libraries and modules as you need them) and couldn&rsquo;t get Perl to connect to the database properly, so I resolved to export it to either MySQL or SQLite.</p>

<p>I was able to export it to MySQL in the end using mdbtools, but I wasn&rsquo;t entirely happy with the end result. I resorted to re-exporting the data as a CSV file, then resolved to write a small Perl script to read the file, parse it using a regular expression to obtain the necessary information, then insert it into a new SQLite database.</p>

<p>Here&rsquo;s what I came up with:</p>

<figure class='code'><figcaption><span>exporttool.pl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="c1">#!/usr/bin/perl -w</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">DBI</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$db</span> <span class="o">=</span> <span class="s">&quot;dbi:SQLite:backend.db&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">-</span><span class="n">e</span> <span class="s">&quot;backend.db&quot;</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="k">print</span> <span class="s">&quot;Database does not exist. Creating it...&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>   <span class="c1"># Create the database</span>
</span><span class='line'>   <span class="k">my</span> <span class="nv">$dbh</span> <span class="o">=</span> <span class="n">DBI</span><span class="o">-&gt;</span><span class="nb">connect</span><span class="p">(</span><span class="nv">$db</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Error in connecting to database! $DBI::errstr&quot;</span><span class="p">;</span>
</span><span class='line'>   <span class="k">my</span> <span class="nv">$createdb</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="k">do</span><span class="p">(</span><span class="s">&quot;CREATE TABLE CARS( ID INTEGER PRIMARY KEY, YEAR INTEGER, MAKE VARCHAR(30), MODEL VARCHAR(30), COLOR VARCHAR(30), PRICE INTEGER);&quot;</span><span class="p">);</span>
</span><span class='line'>   <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="n">disconnect</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">open</span><span class="p">(</span><span class="n">READFILE</span><span class="p">,</span> <span class="s">&quot;cartable.csv&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">while</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="k">unless</span><span class="p">(</span><span class="nv">$_</span> <span class="o">=~</span> <span class="sr">m/id,/</span><span class="p">)</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="sr">m/\d+\,(\d{4})\,\&quot;(\w+)\&quot;\,\&quot;(\w+)\&quot;\,\&quot;(\w+)\&quot;\,\&quot;(\d+)\&quot;/</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$year</span> <span class="o">=</span> <span class="nv">$1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$make</span> <span class="o">=</span> <span class="nv">$2</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$model</span> <span class="o">=</span> <span class="nv">$3</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$color</span> <span class="o">=</span> <span class="nv">$4</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$price</span> <span class="o">=</span> <span class="nv">$5</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$dbh2</span> <span class="o">=</span> <span class="n">DBI</span><span class="o">-&gt;</span><span class="nb">connect</span><span class="p">(</span><span class="nv">$db</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Error in connecting to database! $DBI::errstr&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="k">my</span> <span class="nv">$insertdb</span> <span class="o">=</span> <span class="nv">$dbh2</span><span class="o">-&gt;</span><span class="k">do</span><span class="p">(</span><span class="s">&quot;INSERT INTO CARS (YEAR, MAKE, MODEL, COLOR, PRICE) VALUES (\&quot;$year\&quot;, \&quot;$make\&quot;, \&quot;$model\&quot;, \&quot;$color\&quot;, \&quot;$price\&quot;);&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nv">$dbh2</span><span class="o">-&gt;</span><span class="n">disconnect</span><span class="p">;</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nb">close</span><span class="p">(</span><span class="n">READFILE</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Write completed!\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;To demonstrate it works, we&#39;ll run a SELECT query against the database...\n&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Read the database</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$readdb</span> <span class="o">=</span> <span class="n">DBI</span><span class="o">-&gt;</span><span class="nb">connect</span><span class="p">(</span><span class="nv">$db</span><span class="p">);</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$dbselect</span> <span class="o">=</span> <span class="nv">$readdb</span><span class="o">-&gt;</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;SELECT * FROM CARS;&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$dbselect</span><span class="o">-&gt;</span><span class="n">execute</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Print the results</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;ID\tYear\tMake\tModel\tColor\tPrice\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">while</span><span class="p">(</span><span class="k">my</span> <span class="nv">@row</span> <span class="o">=</span> <span class="nv">$dbselect</span><span class="o">-&gt;</span><span class="n">fetchrow_array</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="k">print</span> <span class="s">&quot;$row[0]\t$row[1]\t$row[2]\t$row[3]\t$row[4]\t$row[5]\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Close the connection</span>
</span><span class='line'><span class="nv">$readdb</span><span class="o">-&gt;</span><span class="n">disconnect</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Apologies for the fact that the indentation doesn&rsquo;t seem to have copied across from Vim very well (can anyone recommend a good WordPress plugin for displaying code, none of the ones I&rsquo;ve tried seem to be any good?). It works well, and it&rsquo;s also helped me grasp Perl&rsquo;s database API better.</p>

<p>I think I&rsquo;ve got a better idea now of what Python and Perl are best at and when to use each. Perl is a great language, but the fact that a lot of it is implicit makes it a little harder to pick up at first than Python - for instance, the default variable, which is quite a good idea, but takes a little getting used to. Its regex support is great, and I like the database API, but I would find it a lot harder to do any object-oriented programming in Perl than in Python (which I guess is why <a href="http://www.iinteractive.com/moose/">Moose</a> exists). I&rsquo;ve found Perl very useful for quick and dirty scripts and as a glue language, but for longer scripts Python seems the better choice.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/22/what-makes-a-good-programming-textbook/">What Makes a Good Programming Textbook?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-08-22T17:15:28+01:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2010</span></span> <span class='time'>5:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I own a lot of programming textbooks. I went through a long phase of buying ones about virtually any technology I was even remotely interested in, therefore I own loads of books about Perl, Ruby, Python, PHP and C, among others. Granted, with many of them I&rsquo;ve done little more than flick through them (I find it&rsquo;s hard to get round to learning things like that without some kind of plan, which was what made me eventually start doing a more formal course since it forced a plan on me), but I&rsquo;ve seen quite a few.</p>

<p>But of course, not every textbook is equal. Some are great, truly seminal works that are raved about by well-known programmers. Examples include the Camel book (Programming Perl) and K &amp; R (The C Programming Language). Others are rarely mentioned. But what makes a really good textbook? Here I&rsquo;m going to list some of the attributes that I&rsquo;ve found in my favourite and most effective programming texts, and that I think make for a good, effective and informative textbook that makes a good job of getting you up and running programming in a new language:</p>

<ul>
<li><p><strong>Lots of working examples to enter</strong> - To learn to program, whether from scratch or in a brand new language, the best advice I&rsquo;ve ever heard was that you need to read a lot of code, and write a lot of code. I find that, at least at the start, nothing helps me learn to code in a new language better than lots of examples for me to type in and run, in order to pick up the basic syntax and keywords of the language. After all, that&rsquo;s how many people used to learn BASIC, by typing in listings from magazines, and it&rsquo;s how you learn English as a child - you&rsquo;re exposed to the language, and you copy it, then understanding comes later. One of the best examples of this is C for Dummies, All In One Desktop Reference, by Dan Godkin - it&rsquo;s packed full of loads of great example programs to enter and run that demonstrate the basic concepts well in C.</p></li>
<li><p><strong>Maintains your interest by showing you how to do interesting things</strong> - Not many people are interested in learning a new programming language to do something tedious (that said, if someone already has to do something tedious, such as a task at work, teaching them how to write a program to do it for them may well be considerably more interesting for them than doing the task themselves, hence the popularity of scripting languages for automating dull tasks), so a good programming textbook needs to show the learner how to do something interesting. Games are an obvious example, but they can get a bit much - how many different versions of Hangman do people want to create? Simple web apps are also an option with many programming languages. If something needs to be more utilitarian, then if possible it should be genuinely useful for solving a problem (the programmer doesn&rsquo;t necessarily need to have this problem, they just need to see how to create a program to fix it). Frivolous little scripts that do things like recite &ldquo;99 Bottles of Beer&rdquo; to demonstrate for loops have their place, but that place is near the start only - by the end a programmer wants to be able to write useful programs.</p></li>
<li><p><strong>Good exercises to stretch the reader </strong>- Many textbooks will have additional exercises for the reader at the end of each chapter that allow them to practice their skills and ensure they aren&rsquo;t just copying a listing, but are genuinely capable of writing code from scratch in the language. These are effectively the &ldquo;homework&rdquo; assignments, and I&rsquo;ve found that these can be far more important at teaching me how to use the language well for actual programming projects than the listings within the book.</p></li>
</ul>


<p>These are my thoughts, but I&rsquo;d be interested to read what other people think about this issue. What&rsquo;s the best programming textbook you&rsquo;ve ever used, and why do you like it? What do you think a good programming textbook should have?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/05/introducing-generator-simple-static-blog/">Introducing Generator-simple-static-blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/28/django-blog-tutorial-the-next-generation-part-9/">Django Blog Tutorial - the Next Generation - Part 9</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/28/changing-date-format-from-dd-slash-mm-slash-yyyy-to-yyyy-mm-dd-in-vim/">Changing Date Format From DD/MM/YYYY to YYYY-MM-DD in Vim</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/31/django-blog-tutorial-the-next-generation-part-8/">Django Blog Tutorial - the Next Generation - Part 8</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/django-blog-tutorial-the-next-generation-part-7/">Django Blog Tutorial - the Next Generation - Part 7</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/matthewbdaly">@matthewbdaly</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'matthewbdaly',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Matthew Daly -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'matthewdaly';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
